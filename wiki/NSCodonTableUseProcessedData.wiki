#summary use processed data to reproduce the main results shown in the manuscript

Some of the processed data are available as an Excel file (download from [https://drive.google.com/file/d/0BwieX-ApVZM5Qm05U1VaeHVYd1E/edit?usp=sharing here]) that contains Supplemental Tables S1~9 of our submitted manuscript; others can be generated using the programs provided bellow.

*Table of Contents:*
<wiki:toc max_depth="2" />

== analysing the nucleotide skew data ==

This section allows you use our model to :
    * analyse the nucleotide skew data, 
    * dissect contributions attributed to replication, transcription and translation, 
    * plot all main figures and figure S2,
    * do statistical tests used in the main text and supplementary text

How-to:
  # download a zip file from [https://drive.google.com/file/d/0BwieX-ApVZM5bEhfYmpmTzMyQmM/edit?usp=sharing here] and unzip it; a folder 'nucleotideSkews2014Rproject' will be created
  # launch your "R" application; if you don't have one, please download it from [http://www.r-project.org/ here]. Set the working directory to "/path/to/nucleotideSkews2014Rproject".
  # copy and paste the contents of the R source code file : 'nskews_june2014.R' into your R program.

*NOTE:* 
  * a few R libraries including "ggplot2" and "caper" are required to make the figures; please install them if you haven't done so.
  * all required data and additional R scripts are included.

== generating the random dataset used in Figure 3 ==

The random dataset was created using a PERL script, which can be downloaded from [https://drive.google.com/file/d/0BwieX-ApVZM5ekFweWxCZ0NnT1E/edit?usp=sharing here].

*NOTE:* a PERL library "List::Util" is required.

== generating the dataset used in Figure 4 (the trade-off; also Figure S2) ==

This dataset was created using an in-house JAVA program, which can be downloaded from [https://drive.google.com/file/d/0BwieX-ApVZM5ZFp3b083R0h0QVU/edit?usp=sharing here]. 

*NOTE:*
  # It is a NetBeans 8 project. Unzip the archived file and open it with NetBeans, you can see the source codes.
  # a precompile jar file can be found in the 'dist/' subfolder. to run it, JAVA 1.7 is required.
  # this program uses a parallel library and it will be VERY memory-consuming, so please try not to run it on your laptop / desktop.

== estimating energy investments in E. coli metabolism ==

How-to:

  # download a zip file from [https://drive.google.com/file/d/0BwieX-ApVZM5M2dTNmpOMERxT0k/edit?usp=sharing here]
  # unzip it, a folder 'E.coli-models' will be created
  # launch your "R" application. Set the working directory to "/path/to/E.coli-models".
  # copy and paste the contents of the R source code files : 'NtAtp01.R' and "NtAtp02.R" into your R program.

* NOTE *
  # R library 'sybil' is required; see [http://www.biomedcentral.com/1752-0509/7/125 here] for the publication; please cite this paper if you can.
  # additional R libraries required by 'sybil' : Matrix, lattice, glpkAPI

The contents of the zip file:
  * the genome-wide metabolic model 'iJO1366' for E. coli by Orth _et al_ [http://www.ncbi.nlm.nih.gov/pubmed/21988831 (PMID: 21988831)]. 
  * two R script files.

== identifying preferred codons for selected genomes ==

[https://drive.google.com/file/d/0BwieX-ApVZM5MzBfdFZ0djFleXc/edit?usp=sharing Here] is a Java implementation of the method we used in our study.

  # It is a NetBeans 8 project. Unzip the archived file and open it with NetBeans, you can see the source codes.
  # a precompile jar file can be found in the 'dist/' subfolder. to run it, JAVA 1.7 is required.
  # this program uses a parallel library and it will be VERY memory-consuming, so please try not to run it on your laptop / desktop.
  # additional files and external programs are needed to run this program; *see [IdentifyPreferredCodon here] for more details on the methods*.

== constructing a neighbour joining tree for the 1500 genomes ==

in this paper we followed the procedure described by Ciccarelli, F. D. _et al_ (PMID: 16513982), with modifications. Briefly,
  # identify the 40 universally conserved marker genes using [http://vm-lux.embl.de/~mende/fetchMG/contact.html fetchMG] for each of the 1500 genomes; 
  # saved the protein sequences into 40 files, one for each marker gene; in the end, we would have 40 files, each contained about 1500 protein sequences.
  # align the protein sequences in each 40 using MUSCLE. At the end of this step, we should have 40 multiple sequence alignment (MSA) files.
  # refine the MSAs using Gblocks with parameters '-t=p -b3=8 -b4=2 -b5=h' (recommended by Ciccarelli, F. D. _et al_)
  # concatenate the 40 refined MSAs into one
  # run TreeBeST on the resulting MSA with default parameters (i.e. 'njtree input_MSA > output_tree.nj'). A neighbour joining tree will be obtained. 
  # (optional step) upload the resulting tree to [http://evolgenius.info/evolview evolview] for visualisation.

preprocessed files for download:
|| *file (download link)* || *description* ||
||  [https://drive.google.com/open?id=0BwieX-ApVZM5UkVQNnp0WjNoZlE&authuser=0 marker genes]  || protein accession numbers of the marker genes identified in the 1500 genomes; there are four columns in the text file: 'genomeAcc' : accession number of genomes; 'proAcc' : accession number of protein sequences; 'hmmModel' : marker gene group; 'eValue' : e-value from hmm search ||
||  [https://drive.google.com/open?id=0BwieX-ApVZM5WElGUWF2cG5EZVU&authuser=0 concatenated MSA] || concatenated multiple sequence alignment that was used to construct the phylogenetic tree  ||
|| [https://drive.google.com/open?id=0BwieX-ApVZM5SW5MQXUwNDZ4Z0U&authuser=0 NHX tree] || resulting phylogenetic tree for the 1500 genomes in NHX format; the tree has branch lengths but no bootstrap values ||
|| [https://drive.google.com/open?id=0BwieX-ApVZM5RnFoU2N4LWp0SEk&authuser=0 newick tree] || resulting phylogenetic tree in newick format; the tree has branch lengths but no bootstrap values  ||
|| [https://drive.google.com/open?id=0BwieX-ApVZM5NFNiZFo3emt1RVE&authuser=0 processed tree] || processed tree using the "CAPER" package in R ||

*please contact me* (chenwh550@gmail.com) if you're interested in the protein sequences of the marker genes and the 40 MSAs before Glocks-ing and concatenation. 